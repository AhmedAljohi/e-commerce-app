# Colors for output
green='\033[0;32m'
blue='\033[0;34m'
yellow='\033[1;33m'
red='\033[0;31m'
no_color='\033[0m'

echo "\n${blue}ğŸ” Running pre-commit checks...${no_color}"

# TypeScript compilation check
echo "\n${green}ğŸ”§ Running TypeScript compilation check...${no_color}"
if ! pnpm exec tsc --noEmit; then
    echo "\n${red}âŒ TypeScript compilation failed!${no_color}"
    echo "${yellow}ğŸ’¡ Fix TypeScript errors before committing.${no_color}"
    exit 1
fi
echo "${green}âœ… TypeScript compilation passed${no_color}"

# Run lint-staged (this handles ESLint, Stylelint, and Prettier)
echo "\n${green}ğŸ“ Running lint-staged (ESLint, Stylelint, Prettier)${no_color}"
pnpm exec lint-staged

# Check if lint-staged succeeded
if [ $? -ne 0 ]; then
    echo "\n${red}âŒ Pre-commit checks failed!${no_color}"
    echo "${yellow}ğŸ’¡ Fix the issues above and try committing again.${no_color}"
    exit 1
fi

echo "\n${green}âœ… All pre-commit checks passed!${no_color}"
echo "${blue}ğŸš€ Proceeding with commit...${no_color}"